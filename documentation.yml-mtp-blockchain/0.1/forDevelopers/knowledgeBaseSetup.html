<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Knowledge Base Setup for Developers :: Antora Docs</title>
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a>MTP-Blockchain</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="documentation.yml-mtp-blockchain" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">MTP-Blockchain</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Master Team Project</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../masterTeamProject/masterProject.html">A Blockchain-based system for course submissions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">For Students</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forStudents/guide.html">Guide for Knowledge Base</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forStudents/metamask.html">Metamask Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">For Lecturers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../forLecturers/raspberry.html">Raspberry Pi setup</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../forLecturers/basicRaspberrySetup.html">Basic Raspberry Pi setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../forLecturers/frontendFaucetRaspberrySetup.html">Frontend &amp; Faucet Raspberry Pi setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../forLecturers/minerRPCRaspberrySetup.html">Miner Node &amp; RPC Node Raspberry Pi setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forLecturers/newSemester.html">Start a new semester</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forLecturers/adminFunctions.html">Admin functions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">For Developers</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="knowledgeBaseSetup.html">Frontend &amp; Blockchain interaction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="smartcontracts.html">Knowledge Base - Smart contracts</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">MTP-Blockchain</span>
    <span class="version">0.1-beta.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">MTP-Blockchain</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.1-beta.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">MTP-Blockchain</a></li>
    <li>For Developers</li>
    <li><a href="knowledgeBaseSetup.html">Frontend &amp; Blockchain interaction</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Knowledge Base Setup for Developers</h1>
<div class="sect1">
<h2 id="_smart_contracts"><a class="anchor" href="#_smart_contracts"></a>Smart Contracts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change directory to <code>smart-contracts</code></p>
</li>
<li>
<p>Install packages using <code>npm i</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_deploy_smart_contracts_to_local_chain"><a class="anchor" href="#_deploy_smart_contracts_to_local_chain"></a>Deploy smart contracts to local chain</h3>
<div class="paragraph">
<p>Deploy contracts to chain using truffle.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Optional: Only recompile the contracts if you did some changes to the contracts <code>truffle compile</code>.
The contracts are already compiled and can be found in the <code>build</code> folder. The frontend needs to have the contracts compiled in order to work.</p>
</li>
<li>
<p>Deploy contracts <code>truffle deploy</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_smart_contract_usage"><a class="anchor" href="#_smart_contract_usage"></a>Smart Contract Usage</h3>
<div class="paragraph">
<p>In total the project has two major smart contracts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ConfigStorage</code>: Stores all necessary config parameters for the system to properly operate</p>
</li>
<li>
<p><code>FaucetStorage</code>: Functions that are necessary for operating the ethereum faucet</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Further the project also has some smart contracts that are implicitly deployed on the chain via inheritance.</p>
</div>
<div class="paragraph">
<p>Three contract are used for this:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>BaseAdmin</code>: Admin related functions</p>
</li>
<li>
<p><code>BaseAssignment</code>: Base functions that every assignment contract (from the students) needs</p>
</li>
<li>
<p><code>BaseValidator</code>: Base functions that every assignment validator contract (from the instructor) needs</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_base_contract_usage"><a class="anchor" href="#_base_contract_usage"></a>Base Contract usage</h3>
<div class="paragraph">
<p>A base contract can be easily imported into any other smart contract by importing the .sol file and referencing the file.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import "../contracts/BaseAdmin.sol";

contract ConfigStorage is BaseAdmin {
    ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>ConfigStorage</code> smart contract inherits any function that the <code>BaseAdmin</code> class owns.</p>
</div>
</div>
<div class="sect2">
<h3 id="_development_of_custom_assignment_validators"><a class="anchor" href="#_development_of_custom_assignment_validators"></a>Development of custom assignment validators</h3>
<div class="paragraph">
<p>To develop custom assignment validators two parts a necessary.</p>
</div>
<div class="sect3">
<h4 id="_part_1_assignment_interface"><a class="anchor" href="#_part_1_assignment_interface"></a>Part 1 - Assignment interface:</h4>
<div class="paragraph">
<p>First of all the instructor needs to write a smart contract which owns all the necessary functions to test the smart contract as <code>virtual</code> functions.
This file can then be inherited by the student and by the validator contract.</p>
</div>
<div class="paragraph">
<p>An example interface file is shown here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/interfaceExample.png" alt="Assignment Interface">
</div>
</div>
<div class="paragraph">
<p>As you can see, the functions have no content and use the <code>virtual</code> keyword.
Therefore, the students do not get help to solve the assignment but get a skeleton to implement the necessary functions/methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="_part_2_assignment_validator_contract"><a class="anchor" href="#_part_2_assignment_validator_contract"></a>Part 2 - Assignment Validator contract:</h4>
<div class="paragraph">
<p>Secondly, the instructor needs to create the necessary validation contract.
To ensure that each validation contract follows the same guidelines as the others, the validation smart contract needs to inherit the <code>BaseValidator</code> contract.
This base contract, offers an interface that every assignment validator contract needs.
An example usage of the smart contract can be seen in the <a href="https://github.com/Jonas-Grill/mtp-blockchain/blob/main/smart-contracts/contracts/example/ExampleAssignmentValidator.sol">ExampleAssignmentValidator</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>Example</h3>
<div class="paragraph">
<p>The <code>ExampleAssignment</code> contract is a mock assignment with some simple functions.
This contract is an example, just like the students would deploy to the blockchain.</p>
</div>
<div class="paragraph">
<p>The instructor needs to develop an interface contract which is in our case the <code>ExampleAssignmentInterface</code>.
As you may see, the functions are not implemented and marked as <code>virtual</code>.
But they allow the <code>ExampleAssignmentValidator</code> contract to call the necessary functions for every contract which inherits the <code>ExampleAssignmentInterface</code>.</p>
</div>
<div class="paragraph">
<p>Using the frontend it is possible to test the deployed <code>ExampleAssignment</code> by taking the address of the person who deployed the <code>ExampleAssignment</code> (should be the student address) and the address of the <code>ExampleAssignment</code> smart contract.
Using these two parameters and the address of the validation contract it is possible to test any implementation of the <code>ExampleAssignment</code> contract (as long as the functions are implemented).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_frontend"><a class="anchor" href="#_frontend"></a>Frontend</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites_2"><a class="anchor" href="#_prerequisites_2"></a>Prerequisites</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change directory to <code>frontend</code>.</p>
</li>
<li>
<p>Install packages using npm <code>npm i</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_frontend_smart_contracts"><a class="anchor" href="#_frontend_smart_contracts"></a>Frontend &amp; smart contracts</h3>
<div class="paragraph">
<p>To properly use the frontend the corresponding smart contracts have to be deployed to the chain.
The documentation on how to deploy the smart contracts to the chain can be viewed <a href="#_deploy_smart_contracts_to_local_chain">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_starting_the_frontend"><a class="anchor" href="#_starting_the_frontend"></a>Starting the frontend</h3>
<div class="paragraph">
<p>To start the frontend for development, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>npm run dev</pre>
</div>
</div>
<div class="paragraph">
<p>To start the frontend for production, run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>npm run build</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faucet"><a class="anchor" href="#_faucet"></a>Faucet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites_3"><a class="anchor" href="#_prerequisites_3"></a>Prerequisites</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change directory to <code>faucet</code>.</p>
</li>
<li>
<p>Install packages using <code>npm i</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_faucet_smart_contracts"><a class="anchor" href="#_faucet_smart_contracts"></a>Faucet &amp; smart contracts</h3>
<div class="paragraph">
<p>To properly use the frontend the corresponding smart contracts have to be deployed to the chain.
The documentation on how to deploy the smart contracts to the chain can be viewed <a href="#_deploy_smart_contracts_to_local_chain">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sending_eth_to_faucet_contract"><a class="anchor" href="#_sending_eth_to_faucet_contract"></a>Sending eth to faucet contract</h3>
<div class="paragraph">
<p>The faucet contract needs to have some ether to send to the students.
To do so, send some ether to the faucet contract address. Use metamask or any other option to send gas to the FaucetStorage contract address.</p>
</div>
</div>
<div class="sect2">
<h3 id="_starting_express_api"><a class="anchor" href="#_starting_express_api"></a>Starting express API</h3>
<div class="paragraph">
<p>To start the express API use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>npm run dev</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_usage"><a class="anchor" href="#_api_usage"></a>API Usage</h3>
<div class="paragraph">
<p>The API has one endpoint that can be used to send ether to a student.
The endpoint is <code>POST /sendEth</code> and requires the following body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "toAddress": "0x9f8fD6722f8f74c9942d0751374a542F5847BfD1"
}</pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
